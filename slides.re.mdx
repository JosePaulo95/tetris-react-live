export { Components } from './Components';
export { Themes } from './Themes';

--

<Stack
  center
  stretch
  style={{
    backgroundColor: 'cornflowerblue',
    inset: 0,
    overflow: 'hidden',
    position: 'absolute',
    zIndex: 0,
    zoom: 0.63,
  }}
></Stack>
<Stack
  center
  selfCenter
  stretch
  style={{
    width: '63%',
    zIndex: 1,
  }}
  vertical
>
  <TitleBox
    children={
      <h1 style={{ marginBottom: 0 }}>Algoritmos e arquitetura com Tetris</h1>
    }
  />
  <TitleBox
    children={<>Jos√© Paulo üòÄ</>}
    style={{
      alignSelf: 'end',
      color: '#000',
      marginTop: 20,
      padding: '12px 20px',
    }}
  />
  <TitleBox
    children={
      <>
        Em colabora√ß√£o com{' '}
        <a
          href="https://www.youtube.com/@toffanettodev"
          style={{ textDecoration: 'none' }}
        >
          @toffanettodev
        </a>
      </>
    }
    style={{
      alignSelf: 'end',
      marginTop: 20,
      padding: '12px 20px',
    }}
  />
</Stack>

---

image: CoverEmpty.jpg
transition: none

--

<Center>
  <Video
    src="/react-tetris-gameplay.mp4"
    style={{
      marginTop: 50,
      borderRadius: 20,
      width: '20%',
    }}
  />
</Center>

---

image: CoverEmpty.jpg
transition: none

--

# Jest & JavaScript Infra

<Center>
  <Video
    src="/Jest.mp4"
    style={{
      marginTop: -60,
      marginLeft: 10,
      borderRadius: 20,
      width: '45%',
    }}
  />
</Center>

---

image: CoverEmpty.jpg
theme: dark
transition: leaveOnly

--

# Nakazawa Tech KK

<Center>
  <div
    style={{
      color: '#fff',
      height: '50%',
      width: '40%',
    }}
  >
    Work with us!

    - [nakazawa.dev](https://nakazawa.dev)

    - [christoph@nakazawa.dev](mailto:christoph@nakazawa.dev)

  </div>
</Center>

---

theme: dark

--

<Center>

<h1 style={{ paddingRight: 10 }}>
  <i>Demo</i>
</h1>

</Center>

---

<Center>

# Building the AI for Athena Crisis

</Center>

---

transition: none

--

<Center>

# Building the AI for Athena Crisis

</Center>
<div style={{
    backdropFilter: 'blur(5px)',
    backgroundColor: '#ff7d00aa',
    borderBottom: '4px solid #fff',
    borderTop: '4px solid #fff',
    boxShadow: 'rgb(0, 0, 0, 0.6) 0 0 8px',
    color: '#fff',
    fontSize: '1.8em',
    fontWeight: 'bold',
    left: '50%',
    padding: 24,
    position: 'absolute',
    textAlign: 'center',
    textShadow: 'rgb(0, 0, 0, 0.4) 0.5px 1px 2px',
    top: '50%',
    transform: 'translate(-50%, -50%) rotate(-35deg)',
    width: '120%',
}}>Warning: Code Heavy Talk</div>

---

transition: leaveOnly

--

<Center>

# Building the AI for Athena Crisis

</Center>
<div style={{
    backdropFilter: 'blur(5px)',
    backgroundColor: '#00bb00aa',
    borderBottom: '4px solid #fff',
    borderTop: '4px solid #fff',
    boxShadow: 'rgb(0, 0, 0, 0.6) 0 0 8px',
    color: '#fff',
    fontSize: '1.8em',
    fontWeight: 'bold',
    left: '50%',
    padding: 24,
    position: 'absolute',
    textAlign: 'center',
    textShadow: 'rgb(0, 0, 0, 0.4) 0.5px 1px 2px',
    top: '50%',
    transform: 'translate(-50%, -50%) rotate(-35deg)',
    width: '120%',
}}>But: Beginner Friendly</div>

---

<Stack alignCenter nowrap style={{flex: 1}}>

<div>

<h1 style={{ fontSize: '1.6em' }}>Sum√°rio</h1>

- Por que React?
- Overview
- IA para balanceamento
- O problema dos grafos
- Anima√ß√µes

</div>

</Stack>

---

# Por que React?

<Stack alignCenter nowrap style={{flex: 1}}>

<div>

<h1 style={{ fontSize: '1.6em' }}>Pr√≥s</h1>

- Acessibilidade
- Aprendizado Progressivo em Jogos

</div>

<div>

<h1 style={{ fontSize: '1.6em' }}>Contras</h1>

- Readequa√ß√£o
- Performance

</div>

</Stack>

---

transition: none

--

# Overview

- Estado centralizado
- Orientado a erros

---

transition: none

--

# Estado centralizado

- Actions

<Code>

```ts
type PieceMoveLeftAction = {
  type: 'piece/move-left';
};

type PieceRotateAction = {
  type: 'piece/rotate';
};

type PieceJoinAction = {
  type: 'piece/join';
};

type BoardCombinationsAction = {
  type: 'board/combinations';
};
```

</Code>

---

transition: none

--

# Estado centralizado

- Reducer

<Code>

```ts highlight={5, 8}
export default function blocks(
  state: BlocksState,
  action: BlocksAction,
): BlocksState {
  switch (action.type) {
    case 'piece/move-left':
      return {
        ...state,
        piece: { ...state.piece, x: state.piece.x - 1 },
      };
    //...
  }
}
```

</Code>

---

transition: none

--

# Estado centralizado

<Stack alignCenter center nowrap>

{' '}

<img src="/redux.png" width="45%" />

</Stack>

---

transition: none

--

# Orienta√ß√£o a erros

<Code>
```cpp highlight={4}
//game loop
int tick() {
  if (++tick > 30) {
    tick = 0;
    if (testa_hit(x, y + 1, r)) {
      if (!y) {
        return 0;
      }
      //...
    }
  }
}
```
</Code>

---

transition: none

--

# Orienta√ß√£o a erros

<Code>
```ts highlight={7}
export const RotatePieceAttempt = (piece: Block, board: Grid): Block => {
  const posMove = { ...piece, rotations: piece.rotations + 1 };
  const posMoveGrid = getCurrentGrid(posMove);

  if (!posMoveGrid || isColliding(posMoveGrid, board)) {
    throw new Error('piece-rotation-move-collision');
  }

  return posMove;
}

```
</Code>

---

transition: none

--

# Orienta√ß√£o a erros
- Erros s√£o actions de 2¬™ instancia

<Code>
```ts
useEffect(() => {
    try {
      handleMatches(blocks, ticks, dispatch);
      handleResetPiece(blocks, dispatch);
      handleFloatingsGoingDown(blocks, ticks, dispatch);
      handlePieceGoingDown(blocks, ticks, dispatch);
      handleUserInput(
        userController.current_input_x,
        userController.current_input_y,
        dispatch,
      );
    } catch (collision) {
      handleCollision(collision as Error, dispatch);
    }
}, [ticks]);
```
</Code>

---

transition: none

--

# Orienta√ß√£o a erros

- Erros s√£o actions de 2¬™ instancia

<Code>
```ts
useEffect(() => {
    try {
      handleMatches(blocks, ticks, dispatch);
      handleResetPiece(blocks, dispatch);
      handleFloatingsGoingDown(blocks, ticks, dispatch);
      handlePieceGoingDown(blocks, ticks, dispatch);
      handleUserInput(
        userController.current_input_x,
        userController.current_input_y,
        dispatch,
      );
    } catch (collision) {
      handleCollision(collision as Error, dispatch);
    }
}, [ticks]);
```
</Code>
